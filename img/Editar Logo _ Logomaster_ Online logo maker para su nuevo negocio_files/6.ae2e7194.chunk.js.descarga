(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[6],{1606:function(e,t,n){var i=n(1589),a=n(1590);e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.id=t.id,this.type=t.type,this.data=t.data,this.frame=t.frame,this.transform=t.transform}return a(e,[{key:"tableFormat",get:function(){return{}}}]),e}()},1620:function(e,t,n){},1621:function(e,t,n){},1622:function(e,t,n){},1734:function(e,t,n){var i={get:n(665),concat:n(2211),min:n(2212),max:n(1089),filter:n(1083)},a=n(757).ConfigDigester,o=function(e,t,n,o,s){var r=a.extractVirtualFrame({frame:{origin:t,size:n},transform:{rotate:o}}),c=r.origin,l={x:r.origin.x+r.size.width,y:r.origin.y+r.size.height},d={x:Math.round((c.x+l.x)/2),y:Math.round((c.y+l.y)/2)},h={id:e,type:"edge",axis:"vertical",value:c.x,endPoints:[c.y,l.y]},u={id:e,type:"edge",axis:"horizontal",value:c.y,endPoints:[c.x,l.x]},p={id:e,type:"edge",axis:"vertical",value:l.x,endPoints:[c.y,l.y]},f={id:e,type:"edge",axis:"horizontal",value:l.y,endPoints:[c.x,l.x]},g=[{id:e,type:"center",axis:"vertical",value:d.x,endPoints:[c.y,l.y]},{id:e,type:"center",axis:"horizontal",value:d.y,endPoints:[c.x,l.x]}],m=[u,h,p,f],v=["ne","se","sw","nw"],b=["n","e","s","w"];if(v.indexOf(s)>=0){var k=[[p,u],[f,p],[h,f],[u,h]][(v.indexOf(s)+Math.floor(o/90))%4];return o%90!==0&&k.pop(),k}if(b.indexOf(s)>=0){var w=[[u,p],[p,f],[f,h],[h,u]][(b.indexOf(s)+Math.floor(o/90))%4];return o%90===0&&w.pop(),w}return"edge"===s?m:"center"===s?g:i.concat(m,g)};e.exports={getGuidelinesFromExisting:function(e,t){var n=e.size,a=o("canvas",{x:0,y:0},n);return t.forEach((function(e,t){var n=e.id,s=e.frame,r=s.origin,c=s.size,l=i.get(e,"transform.rotate")||0,d=o(n,r,c,l);a=i.concat(a,d)})),a},constructGuidelines:o,getMatchedGuidingLines:function(e,t,n,a){var o=[],s=[],r=void 0,c=void 0;return t.forEach((function(t){e.forEach((function(e){if(e.axis===t.axis){var l="vertical"===t.axis,d=l?r:c,h=Math.abs(d),u=e.value-t.value,p=Math.abs(u),f=function(){var n=i.concat(e.endPoints,t.endPoints),a=i.min(n),o=i.max(n);return{axis:e.axis,value:e.value,endPoints:[a,o],difference:u}};a&&p<=n?l?o.push(f()):s.push(f()):void 0===d&&p<=n?l?(r=u,o.push(f())):(c=u,s.push(f())):p<h?l?(r=u,o=[f()]):(c=u,s=[f()]):u===d&&(l?o.push(f()):s.push(f()))}}))})),i.concat(o,s)},getInfoWithMatchedGuidingLines:function(e){var t=void 0,n=i.filter(e,{axis:"vertical"});n.length&&(t=n[0].difference);var a=void 0,o=i.filter(e,{axis:"horizontal"});return o.length&&(a=o[0].difference),{magnitisedDeltaX:t,magnitisedDeltaY:a,verticalGuidingLines:n,horizontalGuidingLines:o}}}},1738:function(e,t,n){"use strict";var i=n(55),a=n(59),o=n(58),s=n(56),r=n(57),c=n(0),l=n.n(c),d=n(82),h=n(118),u=n(290),p=n(681),f=(n(1620),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shouldShowBack,n=e.count;return l.a.createElement("div",{className:t?"floating-button back":"floating-button",onClick:this.props.onClick},l.a.createElement("div",{className:t?"wrapper back":"wrapper"},l.a.createElement("i",{className:"fa fa-cube","aria-hidden":"true"}),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"}),n&&l.a.createElement("span",{className:"badge"},n)))}}]),t}(c.Component)),g=n(51),m=n(785),v=(n(1621),n(887)),b=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"getTitleBlock",value:function(){var e=this.props.t;return l.a.createElement("p",{className:"title"},e("side-bar.title"))}},{key:"getLogoBlocks",value:function(e){var t=this,n=this.props.editingLogoId;return e.map((function(e,i){var a=m.a.getCanvasColor(e.layoutConfig);return l.a.createElement("div",{className:e.id===n?"logo-block active":"logo-block",key:i,onClick:function(){e.id!==n&&t.props.onSelectLogo(e)}},l.a.createElement(v.a,{svg:e.svg,backgroundColor:a,showWatermark:!0}))}))}},{key:"getMobileTitleBlock",value:function(){var e=this.props.t;return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header-label"},e("side-bar.title")),l.a.createElement("button",{className:"header-action-btn",onClick:this.props.onShowSavedLogos},e("navbar.back")))}},{key:"getMobileLogoBlocks",value:function(e){var t=this,n=this.props,i=n.t,a=n.isLoading,o=n.hasNextPage,s=this.props.editingLogoId;return l.a.createElement("div",{className:"logo-blocks"},e.map((function(e,n){var i=m.a.getCanvasColor(e.layoutConfig);return l.a.createElement("div",{className:e.id===s?"logo-block active":"logo-block",key:n,onClick:function(){e.id!==s&&t.props.onSelectLogo(e)}},l.a.createElement(v.a,{svg:e.svg,backgroundColor:i,showWatermark:!0}))})),o&&!a&&l.a.createElement("button",{className:"load-more-btn",onClick:this.props.onLoadMore},i("common.load-more")))}},{key:"render",value:function(){var e=this.props.t,t=this.props,n=t.active,i=t.logos,a=t.isLoading,o=t.hasNextPage,s=p.a.isMobile();return l.a.createElement("div",{className:n?"side-bar active":"side-bar"},s?this.getMobileTitleBlock():this.getTitleBlock(),s?this.getMobileLogoBlocks(i):this.getLogoBlocks(i),a&&l.a.createElement(g.a,null),o&&!a&&!s&&l.a.createElement("button",{className:"load-more-btn",onClick:this.props.onLoadMore},e("common.load-more")))}}]),t}(c.Component),k=Object(h.b)()(b),w=n(3),y=n(2),C=(n(1622),function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e,n))).state={showSideBar:!1},a}return Object(r.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.resetSavedLogos()}},{key:"componentDidUpdate",value:function(e,t){this.props.currentUser.rehydrated&&this.props.currentUser.token&&this.fetchIfNeeded()}},{key:"onLoadMore",value:function(){this.fetchSavedLogos()}},{key:"fetchIfNeeded",value:function(){this.props.currentUser.token&&(1!==this.props.saved.nextPage||this.props.saved.isLoading||this.fetchSavedLogos())}},{key:"fetchSavedLogos",value:function(){this.props.getSavedLogos({page:this.props.saved.nextPage,perPage:32})}},{key:"onSelectLogo",value:function(e){var t=Object(u.getBaseLocaleUrl)(this.props.i18n.language),n={logoId:e.id,config:JSON.parse(e.layoutConfig),purchased:e.purchased},i=window.open("".concat(w.default.webBaseUrl).concat(t,"app/edit"),"_blank");i?(i.editLogoConfig=JSON.stringify(n),i.shouldCloseTabOnBack=!0):(localStorage.setItem("editLogoConfig",JSON.stringify(n)),localStorage.setItem("shouldCloseTabOnBack",!0))}},{key:"getMyLogoSideBarContainerStyle",value:function(){var e=this.props.showSideBar,t=window.innerWidth;return{right:e?0:-(t<320?t:320)}}},{key:"render",value:function(){var e=this,t=p.a.isMobile(),n=t?this.props.showSideBar:this.state.showSideBar,i=this.props.saved,a=i.isLoading,o=i.logos||[],s=i.total,r=i.nextPage<=i.totalPages,c=this.props.preCheckout.editingLogoId;return this.props.currentUser.token&&s?l.a.createElement("div",{className:"my-logo-side-bar-container damped-sliding",style:t?this.getMyLogoSideBarContainerStyle():{}},!t&&l.a.createElement(f,{shouldShowBack:n,count:s,onClick:function(){e.setState({showSideBar:!e.state.showSideBar})}}),l.a.createElement(k,{active:n,logos:o,isLoading:a,hasNextPage:r,onLoadMore:this.onLoadMore.bind(this),onSelectLogo:this.onSelectLogo.bind(this),editingLogoId:c,onShowSavedLogos:this.props.onShowSavedLogos})):null}}]),t}(c.Component));t.a=Object(d.connect)((function(e){return{saved:e.profile.saved,currentUser:e.account.currentUser,preCheckout:e.preCheckout}}),(function(e){return{resetSavedLogos:function(){e(Object(y.Dc)())},setEditLogoConfig:function(t){e(Object(y.Ic)(t))},getSavedLogos:function(t){e(Object(y.rc)(t))}}}))(Object(h.b)()(C))},1814:function(e,t,n){var i=n(757).ConfigDigester;e.exports=function(e,t){var n=i.extractComponentsFrame(t),a={frame:{origin:{x:0,y:0},size:{width:e.size.width,height:e.size.height}}};return i.areaOfIntersection(a,{frame:n})<=0}},1816:function(e,t,n){"use strict";var i=n(55),a=n(59),o=n(58),s=n(56),r=n(57),c=n(0),l=n.n(c),d=(n(2245),n(1758)),h=n(1736),u=n(679),p=n(118),f=n(1552),g=n(681),m=n(674),v=n.n(m),b=n(665),k=n.n(b),w={cloneDeep:v.a,get:k.a},y=g.a.isMobile(),C={root:{color:y?"#ffcb05":"#686AC9","&$checked":{color:y?"#ffcb05":"#686AC9"},width:36,height:36},checked:{},controlLabel:{margin:0},controlLabelText:{fontFamily:"'Ubuntu', sans-serif",color:y?"white":"rgba(0, 0, 0, 0.87)",lineHeight:"16px",fontSize:14}},E=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"handleCanvasColorChange",value:function(e){var t=w.cloneDeep(this.props.config.meta),n=e;t.canvasColor!==n&&(t.canvasColor=n,t.canvasColorInExport=!0,this.props.onMetaChange(t))}},{key:"toggleCanvasColorInExport",value:function(e){var t=w.cloneDeep(this.props.config.meta),n=e.target.checked;t.canvasColorInExport=n,n&&!t.canvasColor&&(t.canvasColor="ffffff"),this.props.onMetaChange(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,i=t.classes,a=t.config,o=w.get(a,"meta.canvasColor","ffffff"),s=w.get(a,"meta.canvasColorInExport",!1),r=n("edit-panel.background-in-export");return y&&(r+=" (".concat(n("home.pricing.plans.premium"),")")),l.a.createElement("div",{className:"background-color-control"},l.a.createElement(d.a,{control:l.a.createElement(h.a,{checked:s,onChange:function(t){e.toggleCanvasColorInExport(t)},classes:{root:i.root,checked:i.checked}}),label:r,classes:{root:i.controlLabel,label:i.controlLabelText}}),!y&&l.a.createElement("span",{className:"premium-label"},n("home.pricing.plans.premium")),l.a.createElement(f.a,{title:"",color:o,onChange:function(t){e.handleCanvasColorChange(t)},gradientDisabled:!0,anchorPosition:"bottom-right",onColorPopoverOpen:this.props.onColorPopoverOpen,onColorPopoverClose:this.props.onColorPopoverClose}))}}]),t}(c.Component);t.a=Object(u.a)(C)(Object(p.b)()(E))},1820:function(e,t,n){"use strict";var i=n(55),a=n(59),o=n(58),s=n(56),r=n(57),c=n(0),l=n.n(c),d=n(681),h=n(1018),u=n.n(h),p=n(4),f=n(1092),g=(n(2210),n(1093)),m={defaultCanvasSize:{width:535,height:331},minSideLength:20,magneticField:5,minDragDistance:2},v=n(1814),b=n.n(v),k=n(674),w=n.n(k),y=n(727),C=n.n(y),E=n(1019),x=n.n(E),O=n(850),S=n.n(O),D=n(1602),M=n.n(D),z=n(1005),j=n.n(z),I=n(1594),L=n.n(I);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={cloneDeep:w.a,forEach:C.a,indexOf:x.a,isEqual:S.a,includes:M.a,findIndex:j.a,delay:L.a},B=function(e){var t=A.cloneDeep(this.state.loadingIds);A.forEach(e,(function(e){var n=A.indexOf(t,e.id);n>=0&&!e.isLoading?t.splice(n,1):n<0&&e.isLoading&&t.push(e.id)})),A.isEqual(t,this.state.loadingIds)||this.setState((function(e){return T({},e,{loadingIds:t})}))},N=function(e){this.setState((function(t){return T({},t,{guidingLines:e})}))},R=function(e){var t=this;if(A.isEqual(e,this.state.selectedIds))0===e.length&&this.props.onSelectComponents(e);else{if(!e.length){var n=this.state.stack.filter((function(e){return A.includes(t.state.selectedIds,e.id)})),i=[];n.forEach((function(e){b()(t.state.canvas,[e])&&i.push(e)})),i.length&&P.bind(this)(i)}this.props.onSelectComponents(e)}},P=function(e){this.props.onDeleteComponents(e)},_=function(e){this.setState((function(t){return T({},t,{panel:{padding:e}})}))},W=function(e){var t=e.dragSelectOrigin,n=e.dragSelectSize;this.setState((function(e){return T({},e,{isDragSelecting:!0,dragSelectInfo:{origin:t||{x:-9999,y:-9999},size:n||{width:0,height:0}}})}))},G=function(){this.setState((function(e){return T({},e,{isDragSelecting:!1,dragSelectInfo:null})}))},U=function(e){this.setState((function(t){return T({},t,{mouseDownOrigin:e})}))},X=function(e){var t=this,n=e.updatedStack,i=e.shouldPromptReport,a=e.userAction,o=A.cloneDeep(this.state.stack);n.forEach((function(e){var n=A.findIndex(o,{id:e.id});o[n]=e,i||A.includes(t.updatedIds,e.id)||t.updatedIds.push(e.id)})),this.setState((function(e){return T({},e,{stack:o,dragInfo:e.isDragging?T({},e.dragInfo,{isDragged:!0}):null,resizeInfo:e.isResizing?T({},e.resizeInfo,{isResized:!0}):null,rotateInfo:e.isRotating?T({},e.rotateInfo,{isRotated:!0}):null})}),(function(){i&&t.props.onComponentsChange(o.filter((function(e){return A.findIndex(n,{id:e.id})>=0})).map((function(e){return e.reportFormat})),{userAction:a,keepCenter:!1})}))},Y=function(e){var t=this,n=e.updatedStack,i=e.shouldPromptReport,a=e.userAction,o=A.cloneDeep(this.state.stack);n.forEach((function(e){var n=o.find((function(t){return e.id===t.id}));n&&(n.frame.origin=e.updatedOrigin,n.cachedData&&(n.cachedData.origin=e.updatedOrigin)),i||A.includes(t.updatedIds,n.id)||t.updatedIds.push(n.id)})),this.setState((function(e){return T({},e,{stack:o,dragInfo:e.isDragging?T({},e.dragInfo,{isDragged:!0}):null})}),(function(){if(i){var e=new Date;t.updateComponentOriginTimestamp=e,A.delay((function(){t.updateComponentOriginTimestamp===e&&t.props.onComponentsChange(o.filter((function(e){return A.findIndex(n,{id:e.id})>=0})).map((function(e){return e.reportFormat})),{userAction:a,keepCenter:!1})}),200)}}))},Z=function(e){this.setState((function(t){return T({},t,{latestKeyDown:e})}))},q=function(e){this.setState((function(t){return T({},t,{hoveringIds:e})}))},K=function(){this.setState((function(e){return T({},e,{hoveringIds:[]})}))},V=function(e){var t=e.draggingStack,n=this.state,i=n.stack,a=n.selectedIds,o=t||A.cloneDeep(i.filter((function(e){return A.includes(a,e.id)})));this.setState((function(e){return T({},e,{isDragging:!0,dragInfo:{stack:o,isDragged:!1}})}))},H=function(){this.setState((function(e){return T({},e,{isDragging:!1,dragInfo:null})}))},J=function(e){var t=this,n=e.id,i=e.bbox,a=e.origin,o=this.state.stack,s=A.findIndex(o,{id:n}),r=o[s];i&&(r.cachedData.bbox=i),a&&(r.cachedData.origin=a),this.setState((function(e){return T({},e,{stack:o})}),(function(){B.bind(t)([{id:n,isLoading:!1}])}))},$=function(e){var t=e.id,n=this.state.stack,i=A.findIndex(n,{id:t});n[i].cachedData={},this.setState((function(e){return T({},e,{stack:n})}))},Q=function(e){var t=this,n=e.id,i=e.frameSize,a=e.origin,o=e.bbox,s=A.cloneDeep(this.state.stack),r=A.findIndex(s,{id:n}),c=s[r];i&&(c.frame.size=i),a&&(c.frame.origin=a,c.cachedData.origin=a),o&&(c.cachedData.bbox=o),this.setState((function(e){return T({},e,{stack:s})}),(function(){var e=new Date;t.updateTextComponentFrameSizeTimestamp=e,A.delay((function(){t.updateTextComponentFrameSizeTimestamp===e&&(t.props.onComponentsChange([c.reportFormat],{userAction:!1,keepCenter:!1}),B.bind(t)([{id:n,isLoading:!1}]))}),200)}))},ee=function(e){var t=this,n=e.id,i=e.frameSize,a=e.bbox,o=A.cloneDeep(this.state.stack),s=A.findIndex(o,{id:n}),r=o[s];r.frame.size=i,a&&(r.cachedData.bbox=a),this.setState((function(e){return T({},e,{stack:o})}),(function(){t.props.onComponentsChange([r.reportFormat],{userAction:!1,keepCenter:!1}),B.bind(t)([{id:n,isLoading:!1}])}))},te=function(e){var t=e.mode,n=this.state,i=n.stack,a=n.selectedIds,o=A.cloneDeep(i.filter((function(e){return A.includes(a,e.id)})));this.setState((function(e){return T({},e,{isResizing:!0,resizeInfo:{stack:o,mode:t}})}))},ne=function(){this.setState((function(e){return T({},e,{isResizing:!1,resizeInfo:null})}))},ie=function(){var e=this.state,t=e.stack,n=e.selectedIds,i=A.cloneDeep(t.filter((function(e){return A.includes(n,e.id)})));this.setState((function(e){return T({},e,{isRotating:!0,rotateInfo:{stack:i}})}))},ae=function(){this.setState((function(e){return T({},e,{isRotating:!1,rotateInfo:null})}))},oe=n(844),se=n(845),re=n(1734),ce=n(757),le=n(1453),de=n(1691),he=n(2213),ue=n.n(he),pe=n(2214),fe=n(731),ge=n.n(fe),me=n(665),ve=n.n(me),be={findIndex:j.a,cloneDeep:w.a,set:ge.a,get:ve.a,indexOf:x.a},ke=["se","sw","nw","ne"],we=["n","s","w","e"],ye=["w","e"];var Ce=function(e){var t=this.state,n=t.canvas,i=t.mouseDownOrigin,a=t.stack,o=e.x-i.x,s=e.y-i.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state.resizeInfo,h=d.stack,u=d.mode,p=be.cloneDeep(h),f=p[0],g=f.frame,v=g.origin,b=g.size,k=v.x+b.width/2,w=v.y+b.height/2,y=be.get(f,"transform.rotate")||0,C=ue()(f,u),E=function(e){var t=["se","s","sw","w","nw","n","ne","e"];if(t.indexOf(e)>=0){var n=t.indexOf(e);return t[(n+4)%8]}return e}(u),x=ue()(f,E),O=a.filter((function(e){return be.findIndex(p,{id:e.id})<0})),S=Object(re.getGuidelinesFromExisting)(n,O),D=m.minSideLength,M=m.minSideLength;if(be.indexOf(ke,u)>=0){var z=Object(pe.getDeltaWithResizeMode)(r,c,u,y),j=z.deltaX,I=z.deltaY,L=0;L=b.width>b.height?D/b.width:M/b.height;var F=b.width+j,T=b.height+I,A=Math.max(F+T,0)/(b.width+b.height);A=Math.max(A,L);var B,R={width:b.width*A,height:b.height*A},P={x:x.x+(k-x.x)*A,y:x.y+(w-x.y)*A},_={x:P.x-R.width/2,y:P.y-R.height/2},W=Object(re.constructGuidelines)("RESIZING",_,R,y,u);Object(re.getMatchedGuidingLines)(S,W,l).forEach((function(e,t){var n;if("horizontal"===e.axis){var i=x.y-C.y;n=(x.y-e.value)/i}else{var a=x.x-C.x;n=(x.x-e.value)/a}if(B){var o=Math.abs(Math.abs(B)-Math.abs(A));Math.abs(Math.abs(n)-Math.abs(A))<o&&(B=n)}else B=n})),B||(B=A);var G={width:b.width*B,height:b.height*B},U={x:x.x+(k-x.x)*B,y:x.y+(w-x.y)*B},Y={x:U.x-G.width/2,y:U.y-G.height/2};if(f.frame.size=G,f.frame.origin=Y,"text"===f.type&&(f.data.fontSize*=B),be.get(f,"data.stroke.width")&&(f.data.stroke.width*=B),f.data.bbox&&(f.data.bbox=Object(de.scaleBboxWithRatio)(f.data.bbox,B)),"text"===f.type){var Z=be.get(f,"cachedData.bbox");Z&&(f.cachedData.bbox=Object(de.scaleBboxWithRatio)(Z,B)),be.set(f,"cachedData.origin",f.frame.origin)}X.bind(this)({updatedStack:[f]});var q=Object(re.constructGuidelines)("RESIZING",Y,G,y),K=Object(re.getMatchedGuidingLines)(S,q,.5,!0);N.bind(this)(K)}else if(be.indexOf(we,u)>=0){b.height>b.width?(D=1,M=4):(D=4,M=1);var V=Object(pe.getDeltaWithResizeMode)(r,c,u,y),H=V.deltaX,J=V.deltaY,$={width:Math.max(b.width+H,D),height:Math.max(b.height+J,M)},Q=H?$.width/b.width:$.height/b.height,ee={x:x.x+(k-x.x)*Q,y:x.y+(w-x.y)*Q},te={x:ee.x-$.width/2,y:ee.y-$.height/2},ne=Object(re.constructGuidelines)("RESIZING",te,$,y,u),ie=Object(re.getMatchedGuidingLines)(S,ne,l),ae=Object(re.getInfoWithMatchedGuidingLines)(ie),oe=ae.magnitisedDeltaX,se=ae.magnitisedDeltaY,ce=0,he=0;void 0===oe&&void 0===se||(void 0!==oe&&void 0!==se?(ce=Math.abs(oe)<=Math.abs(se)?oe:0,he=Math.abs(se)<Math.abs(oe)?se:0):(ce=oe||0,he=se||0),y%90!==0&&(ye.indexOf(u)>=0?ce?he=ce*Math.tan(Object(le.degreeToRadian)(y)):he&&(ce=he/Math.tan(Object(le.degreeToRadian)(y))):ce?he=-ce/Math.tan(Object(le.degreeToRadian)(y)):he&&(ce=-he*Math.tan(Object(le.degreeToRadian)(y)))));var fe=r+ce,ge=c+he,me=Object(pe.getDeltaWithResizeMode)(fe,ge,u,y),ve=me.deltaX,Ce=me.deltaY,Ee={width:Math.max(b.width+ve,D),height:Math.max(b.height+Ce,M)},xe=ve?Ee.width/b.width:Ee.height/b.height,Oe={x:x.x+(k-x.x)*xe,y:x.y+(w-x.y)*xe},Se={x:Oe.x-Ee.width/2,y:Oe.y-Ee.height/2};p.forEach((function(e){e.frame.size=Ee,e.frame.origin=Se})),X.bind(this)({updatedStack:p});var De=Object(re.constructGuidelines)("RESIZING",Se,Ee,y),Me=Object(re.getMatchedGuidingLines)(S,De,.5,!0);N.bind(this)(Me)}},Ee=n(2215),xe={findIndex:j.a,cloneDeep:w.a,set:ge.a,get:ve.a,indexOf:x.a},Oe=function(e){var t=this.state,n=t.canvas,i=t.mouseDownOrigin,a=t.stack,o=e.x-i.x,s=e.y-i.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state.resizeInfo,h=d.stack,u=d.mode,p=xe.cloneDeep(h),f=ce.ConfigDigester.extractComponentsFrame(p),g=f.origin,v=f.size,b=v.height/v.width,k=a.filter((function(e){return xe.findIndex(p,{id:e.id})<0})),w=Object(re.getGuidelinesFromExisting)(n,k),y=m.minSideLength,C=m.minSideLength;if(xe.indexOf(["nw","ne","sw","se"],u)>=0){var E=Object(Ee.getDeltaWithResizeMode)(r,c,u),x=E.deltaX,O=E.deltaY,S=0;S=v.width>v.height?y/v.width:C/v.height;var D=v.width+x,M=v.height+O,z=Math.max(D+M,0)/(v.width+v.height);z=Math.max(z,S);var j={width:v.width*z,height:v.height*z},I=v.width-j.width,L=v.height-j.height,F=Object(Ee.getOriginChangeWithResizeMode)(I,L,u),T=F.originChangeX,A=F.originChangeY,B={x:g.x+T,y:g.y+A},R=Object(re.constructGuidelines)("RESIZING",B,j,0,u),P=Object(re.getMatchedGuidingLines)(w,R,l),_=Object(re.getInfoWithMatchedGuidingLines)(P),W=_.magnitisedDeltaX,G=_.magnitisedDeltaY,U=_.verticalGuidingLines,Y=_.horizontalGuidingLines,Z=Object(Ee.getDeltaWithResizeMode)(W,G,u),q=Z.deltaX,K=Z.deltaY,V=b;void 0!==q&&void 0!==K?V=q?Math.abs(K/q):100:void 0!==q?V=100:void 0!==K&&(V=0);var H=z;V>b?(P=U,H=(j.width+q)/v.width):V<b&&(P=Y,H=(j.height+K)/v.height),H=Math.max(H,S),ce.ConfigDigester.resizeComponents(p,{scale:H,anchor:Object(Ee.getAnchorWithMode)(u)}),p.forEach((function(e){if(e.data.bbox&&(e.data.bbox=Object(de.scaleBboxWithRatio)(e.data.bbox,H)),"text"===e.type){var t=xe.get(e,"cachedData.bbox");t&&(e.cachedData.bbox=Object(de.scaleBboxWithRatio)(t,H)),xe.set(e,"cachedData.origin",e.frame.origin)}})),X.bind(this)({updatedStack:p});var J=ce.ConfigDigester.extractComponentsFrame(p),$=Object(re.constructGuidelines)("RESIZING",J.origin,J.size,0,u),Q=Object(re.getMatchedGuidingLines)(w,$,l);N.bind(this)(Q)}},Se={findIndex:j.a,cloneDeep:w.a,set:ge.a,includes:M.a,indexOf:x.a,delay:L.a},De=function(e){U.bind(this)(e)},Me=function(){var e=this.state,t=e.isDragSelecting,n=e.hoveringIds,i=e.isDragging,a=e.isResizing,o=e.isRotating,s=e.guidingLines;i&&H.bind(this)(),a&&ne.bind(this)(),s.length&&N.bind(this)([]),t&&(G.bind(this)(),n&&n.length&&(R.bind(this)(n),K.bind(this)())),o&&ae.bind(this)()},ze=function(e){var t=this.state,n=t.canvas,i=t.mouseDownOrigin,a=t.stack;if(i&&n){var o=e.x-i.x,s=e.y-i.y,r=o/n.scale,c=s/n.scale,l=m.magneticField/n.scale,d=this.state,h=d.isDragging,u=d.dragInfo;if(h){var p=u.stack,f=u.isDragged,g=ce.ConfigDigester.extractComponentsFrame(p);if(!f){var v=Math.abs(o)>=m.minDragDistance,b=Math.abs(s)>=m.minDragDistance;if(!v&&!b)return}var k={x:g.origin.x+r,y:g.origin.y+c},w=Object(re.constructGuidelines)("DRAGGING",k,g.size),y=a.filter((function(e){return Se.findIndex(p,{id:e.id})<0})),C=Object(re.getGuidelinesFromExisting)(n,y),E=Object(re.getMatchedGuidingLines)(C,w,l),x=Object(re.getInfoWithMatchedGuidingLines)(E),O=x.magnitisedDeltaX,S=void 0===O?0:O,D=x.magnitisedDeltaY,M=void 0===D?0:D,z={x:k.x+S,y:k.y+M},j=Se.cloneDeep(p);ce.ConfigDigester.translateComponents(j,{x:r+S,y:c+M}),Y.bind(this)({updatedStack:j.map((function(e){return{id:e.id,updatedOrigin:e.frame.origin}}))});var I=Object(re.constructGuidelines)("DRAGGING",z,g.size),L=Object(re.getMatchedGuidingLines)(C,I,.5,!0);N.bind(this)(L)}var F=this.state,T=F.isResizing,A=F.resizeInfo;T&&(1===A.stack.length?Ce.bind(this)(e):Oe.bind(this)(e));var B=this.state,R=B.isDragSelecting,P=B.panel;if(R){var _=this.refs["work-station"].getBoundingClientRect(),G={x:(i.x-_.left-P.padding.horizontal)/n.scale,y:(i.y-_.top-P.padding.vertical)/n.scale},U={x:(e.x-_.left-P.padding.horizontal)/n.scale,y:(e.y-_.top-P.padding.vertical)/n.scale},Z={x:Math.min(G.x,U.x),y:Math.min(G.y,U.y)},K={width:Math.abs(G.x-U.x),height:Math.abs(G.y-U.y)};W.bind(this)({dragSelectOrigin:Z,dragSelectSize:K});var V={frame:{origin:Z,size:K}},H=this.state.stack.filter((function(e){return ce.ConfigDigester.areaOfIntersection(V,e)>0}));q.bind(this)(H.map((function(e){return e.id})))}var J=this.state,$=J.isRotating,Q=J.rotateInfo;if($){var ee=Q.stack,te=ce.ConfigDigester.extractComponentsFrame(ee),ne={x:te.origin.x+te.size.width/2,y:te.origin.y+te.size.height/2},ie={x:ne.x*n.scale,y:ne.y*n.scale},ae=this.refs["work-station-content"].getBoundingClientRect(),oe={x:e.x-ae.left,y:e.y-ae.top},se=Object(le.getAngleWithTwoPoints)(ie,oe),de=Object(le.normalizedDegree)(Math.round(se+90)),he=de%90;if((he<3||he>87)&&(de=he<3?de-he:de+(90-he)),360===de&&(de=0),1===ee.length){X.bind(this)({updatedStack:ee.map((function(e){return Se.set(e,"transform.rotate",de),e}))});var ue=Object(re.constructGuidelines)("ROTATING",te.origin,te.size),pe=a.filter((function(e){return Se.findIndex(ee,{id:e.id})<0})),fe=Object(re.getGuidelinesFromExisting)(n,pe),ge=Object(re.getMatchedGuidingLines)(fe,ue,.5,!0);N.bind(this)(ge)}}}},je=function(e){var t=this,n=oe.a.checkFeatureAvailable(this.props.featureList,se.X),i=oe.a.checkFeatureAvailable(this.props.featureList,se.W),a=e.keyCode,o=e.ctrlKey,s=e.metaKey,r=e.shiftKey,c=this.state,l=c.canvas,d=c.stack,h=c.selectedIds,u=Se.cloneDeep(d),p=u.filter((function(e){return Se.includes(h,e.id)})),f=ce.ConfigDigester.extractComponentsFrame(p),g=new Date;Z.bind(this)(g);var m=p.length&&Se.indexOf([37,38,39,40],a)>=0,v=p.length&&Se.indexOf([8,46],a)>=0,b=(o||s)&&!r&&90===a,k=(o||s)&&89===a||(o||s)&&r&&90===a;if(m&&n){e.preventDefault();var w=0,y=0;37===a?w=-1:38===a?y=-1:39===a?w=1:40===a&&(y=1);var C=5*l.scale,E=l.size.width-(f.origin.x+w),x=f.origin.x+w+f.size.width,O=l.size.height-(f.origin.y+y),S=f.origin.y+y+f.size.height;if(0!==w&&(E<C||x<C))return;if(0!==y&&(O<C||S<C))return;p.forEach((function(e){var t=e.frame.origin;e.frame.origin={x:t.x+w,y:t.y+y}}));var D=p.map((function(e){return{id:e.id,updatedOrigin:e.frame.origin}}));Y.bind(this)({updatedStack:D,userAction:!0,shouldPromptReport:!0});var M=u.filter((function(e){return!Se.includes(h,e.id)})),z=Object(re.getGuidelinesFromExisting)(l,M),j=ce.ConfigDigester.extractComponentsFrame(p),I=Object(re.constructGuidelines)("group",j.origin,j.size),L=Object(re.getMatchedGuidingLines)(z,I,.5,!0);N.bind(this)(L),Se.delay((function(){t.state.latestKeyDown===g&&N.bind(t)([])}),800)}v&&i&&P.bind(this)(p),b&&(e.preventDefault(),this.props.onUndoChange()),k&&(e.preventDefault(),this.props.onRedoChange())},Ie=function(){var e=this.state,t=e.isDragging,n=e.isResizing;t||n||R.bind(this)([]),W.bind(this)({})},Le=function(e){_.bind(this)(e)},Fe={includes:M.a},Te=function(e){var t=this.state,n=t.isDragging,i=t.isDragSelecting,a=t.selectedIds,o=Fe.includes(a,e);n||i||o||q.bind(this)([e])},Ae=function(e){var t=this.state,n=t.isDragging,i=t.isDragSelecting,a=t.selectedIds,o=Fe.includes(a,e);n||i||o||K.bind(this)()},Be=function(e){var t=this.state,n=t.selectedIds,i=t.isDragging,a=t.hoveringIds;Fe.includes(a,e.id)&&K.bind(this)(),Fe.includes(n,e.id)||R.bind(this)([e.id]);var o=oe.a.checkFeatureAvailable(this.props.featureList,se.X);!i&&o&&V.bind(this)({draggingStack:[e]})},Ne=function(e){J.bind(this)(e)},Re=function(e){$.bind(this)(e)},Pe=function(e){B.bind(this)([e])},_e=function(e){Q.bind(this)(e)},We=function(e){ee.bind(this)(e)},Ge=function(e){te.bind(this)(e)},Ue=function(e){oe.a.checkFeatureAvailable(this.props.featureList,se.X)&&V.bind(this)({})},Xe=function(){ie.bind(this)()},Ye={canvas:{size:{width:535,height:331},scale:1},selectedIds:[],stack:[],panel:{padding:{horizontal:50,vertical:50}},loadingIds:[],hoveringIds:[],isDragSelecting:!1,dragSelectInfo:null,isResizing:!1,resizeInfo:null,isDragging:!1,dragInfo:null,isRotating:!1,rotateInfo:null,guidelines:[],guidingLines:[],mouseDownOrigin:null,latestKeyDown:null},Ze=n(2216),qe=n(2246),Ke=n.n(qe),Ve=n(118);function He(){var e=Object(f.a)(["\n  border: 0.5px solid #FFF065;\n  pointer-events: none;\n  position: absolute;\n\ttransform: rotateZ(0rad);\n\tz-index: 1000;\n"]);return He=function(){return e},e}var Je=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height,top:e.top,left:e.left}}})(He()),$e=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.panel,n=e.canvas,i=e.guidingLine,a=i.axis,o=i.value,s=i.endPoints,r=s[1]-s[0],c="horizontal"===a?r:0,d="vertical"===a?r:0,h="vertical"===a?s[0]:o,u="vertical"===a?o:s[0];return l.a.createElement(Je,{className:"guiding-line",width:c*n.scale,height:d*n.scale,top:h*n.scale+t.padding.vertical,left:u*n.scale+t.padding.horizontal})}}]),t}(c.Component);function Qe(){var e=Object(f.a)(["\n  border: 1px dashed white;\n  pointer-events: none;\n  position: absolute; \n  opacity: 0.2;\n  background-color: rgb(67, 91, 88);\n\tanimation: "," 0.3s;\n\tz-index: 1000;\n"]);return Qe=function(){return e},e}function et(){var e=Object(f.a)(["\n  from { opacity: 0; }\n  to   { opacity: 0.2; }\n"]);return et=function(){return e},e}var tt={get:ve.a},nt=Object(g.b)(et()),it=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height,top:e.top,left:e.left,transform:"rotateZ(".concat(e.rotate,"deg)"),WebkitTransform:"rotateZ(".concat(e.rotate,"deg)"),msTransform:"rotateZ(".concat(e.rotate,"deg)")}}})(Qe(),nt),at=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.panel,n=e.canvas,i=e.hoveringElem,a=n.scale,o=i.frame.origin,s=o.x,r=o.y,c=i.frame.size,d=c.width,h=c.height,u=tt.get(i,"transform.rotate",0);return l.a.createElement(it,{className:"highlight-frame",width:d*a,height:h*a,top:r*a+t.padding.vertical,left:s*a+t.padding.horizontal,rotate:u})}}]),t}(c.Component);n(2224);function ot(){var e=Object(f.a)(["\n  width: 0px; \n  height: 16px;\n  position: absolute;\n  border: 1px dashed rgb(104, 106, 210);\n  pointerEvents: none\n"]);return ot=function(){return e},e}function st(){var e=Object(f.a)(["\n  width: 0px; \n  height: 30px;\n  position: absolute;\n  border: 1px dashed rgb(104, 106, 210);\n  pointerEvents: none\n"]);return st=function(){return e},e}function rt(){var e=Object(f.a)(["\n  border-color: rgb(104, 106, 210);\n  background-color: #ffffff;\n"]);return rt=function(){return e},e}function ct(){var e=Object(f.a)(["\n  border-radius: ","px;\n  border-color: rgb(255, 255, 255);\n  background-color: #686AC9;\n"]);return ct=function(){return e},e}function lt(){var e=Object(f.a)(["\n  position: absolute;\n  opacity: 1;\n  z-index: 1;\n  display: block;\n  border-width: ","px\n  border-style: solid\n  box-sizing: border-box;\n  width: ","px;\n  height: ","px;\n  visibility: visible;\n  pointer-events: auto;\n"]);return lt=function(){return e},e}function dt(){var e=Object(f.a)(["\n  position: absolute;\n  border: 1px dashed #686AC9;\n  pointer-events: ",";\n"]);return dt=function(){return e},e}function ht(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  z-index: 1000;\n  pointer-events: none;\n"]);return ht=function(){return e},e}var ut={get:ve.a},pt=d.a.isMobile(),ft=pt?16:12,gt=(ft+2)/2,mt=g.a.div.attrs({style:function(e){return{top:e.top,left:e.left}}})(ht()),vt=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height,transform:"rotateZ(".concat(e.rotate,"deg)"),WebkitTransform:"rotateZ(".concat(e.rotate,"deg)"),msTransform:"rotateZ(".concat(e.rotate,"deg)")}}})(dt(),(function(e){return e.isMultipleSelection?"auto":"none"})),bt=g.a.div(lt(),2,ft,ft),kt=Object(g.a)(bt).attrs({style:function(e){return{top:e.top,left:e.left}}})(ct(),ft/2),wt=Object(g.a)(bt).attrs({style:function(e){return{top:e.top,left:e.left}}})(rt()),yt=g.a.div.attrs({style:function(e){return{top:-30,left:e.left}}})(st()),Ct=g.a.div.attrs({style:function(e){return{top:e.top,left:e.left}}})(ot()),Et=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"_handleMouseDown",value:function(e){e.stopPropagation(),this.props.onSelectedFrameAction({type:"selectedFrameMouseDown",info:null})}},{key:"_resizeMouseDown",value:function(e,t){t.stopPropagation(),this.props.onSelectedFrameAction({type:"resizeMouseDown",info:{mode:e}})}},{key:"_rotateMouseDown",value:function(e){e.stopPropagation(),this.props.onSelectedFrameAction({type:"rotateMouseDown",info:null})}},{key:"_handleTouchStart",value:function(e){this._handleMouseDown(e)}},{key:"_resizeTouchStart",value:function(e,t){this._resizeMouseDown(e,t)}},{key:"_rotateTouchStart",value:function(e){this._rotateMouseDown(e)}},{key:"getTextWidth",value:function(e,t){var n=(this.getTextWidth.canvas||(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return n.font=t,n.measureText(e).width}},{key:"getCursor",value:function(e,t){var n=["se","s","sw","w","nw","n","ne","e"].indexOf(e),i=Object(le.normalizedDegree)(t+22.5);return["ldr","vr","rdr","hr","ldr","vr","rdr","hr"][(n+Math.floor(i/45))%8]}},{key:"render",value:function(){var e=this.props,t=e.resizable,n=e.rotatable,i=this.props,a=i.panel,o=i.canvas,s=i.selectedElem,r=i.isDragging,c=i.isResizing,d=i.isRotating,h=i.resizeInfo,u="group"===s.type,p=ut.get(s,"transform.rotate",0),f=s.frame.origin.x,g=s.frame.origin.y;s.frame.size.width,o.scale;if(r&&!0,c)switch(h.mode){case"se":f+=s.frame.size.width,g+=s.frame.size.height,s.frame.size.height*o.scale,!1;break;case"ne":f+=s.frame.size.width,!1;break;case"sw":g+=s.frame.size.height,s.frame.size.height*o.scale}f=Math.round(f),g=Math.round(g);"".concat(f,",").concat(g);var m=!1,v=!1,b=!1,k=!1,w=!1;t&&("shape"===s.type?(c&&!0,m=!0,v=!0,b=!0,k=!0,w=!0):"line"!==s.type?(c&&!0,m=!0):s.frame.size.width<s.frame.size.height?(v=!0,w=!0):(k=!0,b=!0));var y=pt&&"line"===s.type&&t&&n,C=p||0,E="".concat(C,"\xb0");return l.a.createElement(mt,{className:"selected-frame",top:s.frame.origin.y*o.scale+a.padding.vertical,left:s.frame.origin.x*o.scale+a.padding.horizontal},l.a.createElement(vt,{className:"cursor-move",width:s.frame.size.width*o.scale,height:s.frame.size.height*o.scale,onMouseDown:this._handleMouseDown.bind(this),onTouchStart:this._handleTouchStart.bind(this),isMultipleSelection:u,rotate:p},m&&l.a.createElement(kt,{kind:"nw",className:this.getCursor("nw",C),top:-gt,left:-gt,onMouseDown:this._resizeMouseDown.bind(this,"nw"),onTouchStart:this._resizeTouchStart.bind(this,"nw")}),m&&l.a.createElement(kt,{kind:"ne",className:this.getCursor("ne",C),top:-gt,left:-gt+s.frame.size.width*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"ne"),onTouchStart:this._resizeTouchStart.bind(this,"ne")}),m&&l.a.createElement(kt,{kind:"sw",className:this.getCursor("sw",C),top:-gt+s.frame.size.height*o.scale,left:-gt,onMouseDown:this._resizeMouseDown.bind(this,"sw"),onTouchStart:this._resizeTouchStart.bind(this,"sw")}),m&&l.a.createElement(kt,{kind:"se",className:this.getCursor("se",C),top:-gt+s.frame.size.height*o.scale,left:-gt+s.frame.size.width*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"se"),onTouchStart:this._resizeTouchStart.bind(this,"se")}),k&&l.a.createElement(wt,{kind:"w",className:this.getCursor("w",C),left:-gt,top:-gt+s.frame.size.height/2*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"w"),onTouchStart:this._resizeTouchStart.bind(this,"w")}),b&&l.a.createElement(wt,{kind:"e",className:this.getCursor("e",C),left:-gt+s.frame.size.width*o.scale,top:-gt+s.frame.size.height/2*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"e"),onTouchStart:this._resizeTouchStart.bind(this,"e")}),v&&l.a.createElement(wt,{kind:"n",className:this.getCursor("n",C),left:-gt+s.frame.size.width/2*o.scale,top:-gt,onMouseDown:this._resizeMouseDown.bind(this,"n"),onTouchStart:this._resizeTouchStart.bind(this,"n")}),w&&l.a.createElement(wt,{kind:"s",className:this.getCursor("s",C),left:-gt+s.frame.size.width/2*o.scale,top:-gt+s.frame.size.height*o.scale,onMouseDown:this._resizeMouseDown.bind(this,"s"),onTouchStart:this._resizeTouchStart.bind(this,"s")}),n&&l.a.createElement(yt,{left:s.frame.size.width/2*o.scale},l.a.createElement("div",{kind:"rotate",className:"cursor-rotate",style:{position:"absolute",width:20,height:20,borderRadius:10,background:"rgb(255, 255, 255)",visibility:"visible",marginLeft:-10,top:-20,pointerEvents:"auto"},onMouseDown:this._rotateMouseDown.bind(this),onTouchStart:this._rotateMouseDown.bind(this)},l.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 15 14",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-7,marginTop:-7}},l.a.createElement("path",{fill:"#4B596E",d:"M12.378,10.467L15,6.489h-1.384c-0.26-3.254-2.961-5.752-6.297-5.752c-1.688,0-3.276,0.651-4.47,1.834 C1.657,3.754,1,5.327,1,7c0,3.453,2.835,6.263,6.32,6.263c1.425,0,2.77-0.461,3.891-1.33l0.315-0.244l-1.521-1.609l-0.262,0.191 c-0.706,0.516-1.546,0.787-2.423,0.787c-2.257,0-4.096-1.822-4.096-4.061c0-2.24,1.837-4.063,4.096-4.063 c2.094,0,3.811,1.532,4.063,3.551H9.759L12.378,10.467z"})),d&&l.a.createElement("div",{style:{position:"absolute",fontFamily:"roboto",fontSize:14,fontWeight:"regular",top:-2*ft,left:-gt,color:"#5b616b",width:40,textAlign:"center",transform:"rotateZ(-".concat(C,"deg)"),WebkitTransform:"rotateZ(-".concat(C,"deg)"),msTransform:"rotateZ(-".concat(C,"deg)")}},E))),y&&l.a.createElement(Ct,{top:s.frame.size.height*o.scale,left:s.frame.size.width/2*o.scale},l.a.createElement("div",{kind:"rotate",className:"cursor-dragndrop",style:{position:"absolute",width:20,height:20,borderRadius:10,background:"rgb(255, 255, 255)",visibility:"visible",marginLeft:-10,bottom:-20,pointerEvents:"auto"},onMouseDown:this._handleMouseDown.bind(this),onTouchStart:this._handleTouchStart.bind(this)},l.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 1024 1024",style:{position:"absolute",left:"50%",top:"50%",marginLeft:-7,marginTop:-7}},l.a.createElement("path",{fill:"#333333",d:"M1019.29412 500.853792l-169.529986-169.529986a15.55321 15.55321 0 0 0-26.440456 10.887247v118.204394h-259.220163v-259.220163h117.685954a15.55321 15.55321 0 0 0 10.887247-26.958896L523.146729 4.706401a15.55321 15.55321 0 0 0-22.292934 0L331.323809 174.236388a15.55321 15.55321 0 0 0 10.887247 26.958896h118.204394v259.220163h-259.220162V342.211053a15.55321 15.55321 0 0 0-26.958897-10.887247L4.706404 500.853792a15.55321 15.55321 0 0 0 0 22.292934l169.529987 169.529986a15.55321 15.55321 0 0 0 26.958897-10.887246v-117.685954h259.220162v259.220162H342.211056a15.55321 15.55321 0 0 0-10.887247 26.440457l169.529986 169.529986a15.55321 15.55321 0 0 0 22.292934 0l169.529987-169.529986a15.55321 15.55321 0 0 0-10.887247-26.440457h-117.685954v-259.220162h259.220163v117.685954a15.55321 15.55321 0 0 0 26.440456 10.887246l169.529986-169.529986a15.55321 15.55321 0 0 0 0-22.292934z"})))),null))}}]),t}(c.Component),xt=n(1785),Ot=n(1784),St=n(1598);function Dt(){var e=Object(f.a)(["\n  user-select: none;\n  position: absolute;\n  background: ",";\n"]);return Dt=function(){return e},e}var Mt={get:ve.a},zt=g.a.div.attrs({style:function(e){return{width:e.width,height:e.height}}})(Dt(),(function(e){return e.backgroundColor})),jt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.canvas,i=t.elem,a=n.scale,o=i.frame.size,s=o.width,r=o.height,c=i.data.tintColor;if("string"===typeof c)e="#".concat(c);else if("object"===typeof c){var d=Object(le.normalizedDegree)(c.degree),h=Mt.get(i,"transform.flip",{h:!1,v:!1});h.h&&(d=-d),h.v&&(d=180-d),e="linear-gradient(\n        ".concat(d+180,"deg, \n        #").concat(c.stack[0].color," ").concat(100*c.stack[0].offset,"%, \n        #").concat(c.stack[1].color," ").concat(100*c.stack[1].offset,"%\n      )")}else e="#000000";return l.a.createElement(St.a,{canvas:n,elem:i,onBaseComponentAction:this.props.onBaseComponentAction},l.a.createElement(zt,{className:"line-component",width:s*a,height:r*a,backgroundColor:e}))}}]),t}(c.Component),It=n(1786);function Lt(){var e=Object(f.a)(["\n  border: 1px solid black;\n  pointer-events: none;\n  position: absolute;\n  opacity: 0.2;\n  background-color: #888888;\n\ttransform: rotateZ(0rad);\n\tz-index: 1000;\n"]);return Lt=function(){return e},e}var Ft=g.a.div.attrs({style:function(e){return{top:e.top,left:e.left,width:e.width,height:e.height}}})(Lt()),Tt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dragSelectInfo,n=e.canvas,i=e.panel;return l.a.createElement(Ft,{className:"drag-select-frame",width:t.size.width*n.scale,height:t.size.height*n.scale,top:t.origin.y*n.scale+i.padding.vertical,left:t.origin.x*n.scale+i.padding.horizontal})}}]),t}(c.Component),At=n(13),Bt=n.n(At),Nt=n(2225),Rt=n.n(Nt),Pt=(n(2240),n(2241),n(2242),n(2243)),_t=n.n(Pt),Wt=n(1701),Gt=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"handleArticleClick",value:function(e){Bt.a.event({category:"Article",action:"ClickArticle",label:e}),window.open(e,"_blank")}},{key:"getSliderSlides",value:function(){var e=this,t=this.props.editingTips;if(t){var n=[];return t.forEach((function(t,i){n.push(l.a.createElement("div",{className:"slide",key:i},l.a.createElement("div",{className:"slide-content"},l.a.createElement("div",{className:"editing-tips"},l.a.createElement("div",{className:"article-container"},l.a.createElement("div",{className:"tips-article",onClick:e.handleArticleClick.bind(e,t.info.contentUrl),key:i},l.a.createElement("div",{className:"article-image",style:{backgroundImage:"url(".concat(t.info.imageUrl,")")}}),l.a.createElement("div",{className:"article-details"},l.a.createElement("div",{className:"article-title"},t.info.title),l.a.createElement("div",{className:"article-description"},t.info.desc),l.a.createElement("div",{className:"bottom-cover"}))))))))})),n}return l.a.createElement("div",{className:"slide"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,i=t.isShowingTipsCarousel,a=!(t.menuItem===Wt.f)&&i,o="carousel-container damped-sliding";return a||(o+=" hide-carousel"),l.a.createElement("div",{className:o},l.a.createElement("div",{className:"editing-tips-header"},l.a.createElement("div",{className:"header-title"},n("edit-panel.tips.editing-tips")),l.a.createElement("div",{className:"header-more",onClick:function(){return e.props.onMenuClick(Wt.f)}},n("common.load-more"))),l.a.createElement(Rt.a,{className:"adsSlider",dots:!1,infinite:!0,speed:1e3,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e4,pauseOnHover:!0,arrows:!0,swipe:!1},this.getSliderSlides()),l.a.createElement("div",{className:"toggle-button",onClick:this.props.onToggleButtonClick},a?l.a.createElement(_t.a,null):l.a.createElement("i",{className:"fa fa-lightbulb-o","aria-hidden":"true"})))}}]),t}(c.Component),Ut=Object(Ve.b)()(Gt),Xt=(n(2244),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.content;return l.a.createElement("div",{className:"editing-alert-view"},l.a.createElement("p",null,e))}}]),t}(c.Component)),Yt=n(1683),Zt=n(1761),qt=n(1762),Kt=n(1816),Vt=n(1004),Ht=n.n(Vt);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(){var e=Object(f.a)(["\n  pointer-events: none;\n"]);return Qt=function(){return e},e}function en(){var e=Object(f.a)(["\n  z-index: 1;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: ",";\n  background-size: contain;\n  pointer-events: none;\n"]);return en=function(){return e},e}var tn={cloneDeep:w.a,includes:M.a,find:Ht.a,isEqual:S.a,get:ve.a},nn=g.a.div(en(),(function(e){return e.shouldShowWatermark?"url(/watermark.png)":"none"})),an=g.a.div(Qt()),on=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(o.a)(this,Object(s.a)(t).call(this,e));var a=e.config?Object(Ze.getStackFromConfig)(tn.cloneDeep(e.config.components)):[],r=e.selectedComponents?e.selectedComponents.map((function(e){return e.id})):[],c=e.canvasSize||m.defaultCanvasSize,l=e.currentScale||1;return n.state=$t({},Ye,{stack:a,selectedIds:r,canvas:{size:c,scale:l}}),n.updatedIds=[],n}return Object(r.a)(t,e),Object(a.a)(t,[{key:"preventPullToRefresh",value:function(e){document.querySelector("body").style["overscroll-behavior"]="none";var t=!1;document.querySelector(e).addEventListener("touchstart",(function(e){if(1===e.touches.length){var n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=0===n}})),document.querySelector(e).addEventListener("touchmove",(function(e){t&&(t=!1,e.preventDefault())}))}},{key:"releasePullToRefresh",value:function(){document.querySelector("body").style["overscroll-behavior"]="auto"}},{key:"componentWillReceiveProps",value:function(e,t){var n=this,i=(e.config?Object(Ze.getStackFromConfig)(tn.cloneDeep(e.config.components)):[]).map((function(e){if(tn.includes(n.state.loadingIds,e.id)){var t=tn.find(n.state.stack,{id:e.id});e.frame=t.frame}return e}));if(!Object(Ze.isSameStack)(i,this.state.stack)){var a=Object(Ze.inheritCacheFromOldStack)(i,this.state.stack);this.setState((function(e){return $t({},e,{stack:a})}))}var o=e.selectedComponents?e.selectedComponents.map((function(e){return e.id})):[];tn.isEqual(this.state.selectedIds,o)||this.setState((function(e){return $t({},e,{selectedIds:o})}));var s=e.canvasSize||m.defaultCanvasSize;tn.isEqual(this.state.canvas.size,s)||this.setState((function(e){return $t({},e,{canvas:$t({},e.canvas,{size:s})})}),(function(){n.handleWindowResize()}));var r=e.currentScale||1;tn.isEqual(this.state.canvas.scale,r)||this.setState((function(e){return $t({},e,{canvas:$t({},e.canvas,{scale:r})})}),(function(){n.handleWindowResize()}))}},{key:"componentDidUpdate",value:function(e,t){if(t.isDragging&&!this.state.isDragging&&t.dragInfo.isDragged){var n=this.state,i=n.canvas,a=n.stack;if(t.dragInfo.stack.length){var o=t.dragInfo.stack.map((function(e){return e.id})),s=a.filter((function(e){return tn.includes(o,e.id)}));if(b()(i,s))return P.bind(this)(s),void(this.updatedIds=[])}this.notifyUpdatedComponents()}t.isResizing&&!this.state.isResizing&&t.resizeInfo.isResized&&this.notifyUpdatedComponents(),t.isRotating&&!this.state.isRotating&&t.rotateInfo.isRotated&&this.notifyUpdatedComponents()}},{key:"componentWillMount",value:function(){this.subscribeEventListeners()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,this.unsubscribeEventListeners(),this.releasePullToRefresh()}},{key:"subscribeEventListeners",value:function(){this._handleWindowResize=this.handleWindowResize.bind(this),this._handleMouseDown=this.handleMouseDown.bind(this),this._handleMouseUp=this.handleMouseUp.bind(this),this._handleMouseMove=this.handleMouseMove.bind(this),this._handleKeyDown=this.handleKeyDown.bind(this),this._handleTouchStart=this.handleTouchStart.bind(this),this._handleTouchEnd=this.handleTouchEnd.bind(this),this._handleTouchMove=this.handleTouchMove.bind(this),window.addEventListener("resize",this._handleWindowResize,!1),document.addEventListener("mousedown",this._handleMouseDown,!1),document.addEventListener("mouseup",this._handleMouseUp,!1),document.addEventListener("mousemove",this._handleMouseMove,!1),document.addEventListener("keydown",this._handleKeyDown,!1),document.addEventListener("touchstart",this._handleTouchStart,!1),document.addEventListener("touchend",this._handleTouchEnd,!1),document.addEventListener("touchmove",this._handleTouchMove,!1)}},{key:"unsubscribeEventListeners",value:function(){window.removeEventListener("resize",this._handleWindowResize,!1),document.removeEventListener("mousedown",this._handleMouseDown,!1),document.removeEventListener("mouseup",this._handleMouseUp,!1),document.removeEventListener("mousemove",this._handleMouseMove,!1),document.removeEventListener("keydown",this._handleKeyDown,!1),document.removeEventListener("touchstart",this._handleTouchStart,!1),document.removeEventListener("touchend",this._handleTouchEnd,!1),document.removeEventListener("touchmove",this._handleTouchMove,!1)}},{key:"componentDidMount",value:function(){this._ismounted=!0;var e=this.props.t,t=this.refs["work-station"],n=d.a.isMobile(),i=oe.a.checkFeatureAvailable(this.props.featureList,se.F);(function e(){!function(){var e=t.getBoundingClientRect();return n?e.top>40:e.left>430}()?setTimeout(function(){this._ismounted&&e.bind(this)()}.bind(this),50):this.handleWindowResize()}).bind(this)(),n&&i&&window.alert(e("edit-panel.tips.editing-alert"));var a=d.a.isFireFox()&&n,o=d.a.isIOSFireFox();n&&!(a&&!o)&&this.preventPullToRefresh(".viewer-panel")}},{key:"handleWindowResize",value:function(){var e=this.refs["work-station"].getBoundingClientRect(),t=this.refs["work-station-content"].getBoundingClientRect();Le.bind(this)({vertical:t.top-e.top,horizontal:t.left-e.left})}},{key:"handleKeyDown",value:function(e){"INPUT"===e.target.nodeName||je.bind(this)(e)}},{key:"notifyUpdatedComponents",value:function(){var e=this,t=this.state.stack.filter((function(t){return tn.includes(e.updatedIds,t.id)})).map((function(e){return e.reportFormat}));this.props.onComponentsChange(t,{userAction:!0}),this.updatedIds=[]}},{key:"handleMouseDown",value:function(e){De.bind(this)({x:e.clientX,y:e.clientY})}},{key:"handleMouseUp",value:function(){Me.bind(this)()}},{key:"handleMouseMove",value:function(e){ze.bind(this)({x:e.clientX,y:e.clientY})}},{key:"handleTouchStart",value:function(e){var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;De.bind(this)({x:t,y:n})}},{key:"handleTouchEnd",value:function(){Me.bind(this)()}},{key:"handleTouchMove",value:function(e){var t=e.targetTouches[0].clientX,n=e.targetTouches[0].clientY;ze.bind(this)({x:t,y:n})}},{key:"_onMouseDown",value:function(){Ie.bind(this)()}},{key:"handleBaseComponentAction",value:function(e){var t=e.type,n=e.info;switch(t){case"mouseEnter":Te.bind(this)(n);break;case"mouseLeave":Ae.bind(this)(n);break;case"mouseDown":Be.bind(this)(n)}}},{key:"handleTextComponentAction",value:function(e){var t=e.type,n=e.info;switch(t){case"updateCache":Ne.bind(this)(n);break;case"removeCache":Re.bind(this)(n);break;case"updateLoading":Pe.bind(this)(n);break;case"updateFrameSize":_e.bind(this)(n);break;case"updateFontSize":We.bind(this)(n)}}},{key:"handleSelectedFrameAction",value:function(e){var t=e.type,n=e.info;switch(t){case"resizeMouseDown":Ge.bind(this)(n);break;case"selectedFrameMouseDown":Ue.bind(this)();break;case"rotateMouseDown":Xe.bind(this)()}}},{key:"getViewerPanelBoundingRect",value:function(){var e=this.refs["work-station-content"];return e?{top:e.offsetTop,left:e.offsetLeft,width:e.clientWidth,height:e.clientHeight}:null}},{key:"getAutoCenterButtonSize",value:function(){var e=document.getElementById("auto-center-button");return e?{width:e.clientWidth,height:e.clientHeight}:null}},{key:"getAutoCenterButton",value:function(){var e=this.props.t,t=this.getViewerPanelBoundingRect(),n=this.getAutoCenterButtonSize();if(!t)return null;n||(n={width:0,height:0});var i={position:"absolute",top:t.top+t.height-n.height-8,left:t.left+t.width-n.width-8,pointerEvents:"auto",zIndex:2};return n.width||(i.opacity=0),l.a.createElement("div",{id:"auto-center-button",className:"auto-center-button",style:i,onClick:this.props.onAutoCenter},l.a.createElement(Ke.a,null),l.a.createElement("span",null,e("edit-panel.viewer-panel.center-logo")))}},{key:"render",value:function(){var e=this,t=d.a.isMobile(),n=this.props,i=n.t,a=n.editingLogoPurchased,o=n.config,s=this.state,r=s.panel,c=s.canvas,h=s.selectedIds,u=s.hoveringIds,p=s.isDragging,f=s.isResizing,g=this.getViewerPanelBoundingRect(),m=!a,v=tn.get(o,"meta.canvasColorInExport"),b=tn.get(o,"meta.canvasColor"),k=oe.a.checkFeatureAvailable(this.props.featureList,se.U),w=oe.a.checkFeatureAvailable(this.props.featureList,se.Z),y=oe.a.checkFeatureAvailable(this.props.featureList,se.V),C=oe.a.checkFeatureAvailable(this.props.featureList,se.bb),E=oe.a.checkFeatureAvailable(this.props.featureList,se.cb),x=oe.a.checkFeatureAvailable(this.props.featureList,se.G),O=oe.a.checkFeatureAvailable(this.props.featureList,se.F),S=!t&&!this.props.isLoadingEditingTips&&this.props.editingTips&&this.props.editingTips.length&&x,D=!t&&O,M=0;return k&&(M+=240),l.a.createElement("div",{className:"viewer-panel"},l.a.createElement("div",{id:"canvas"}),l.a.createElement("div",{className:"work-station",onMouseDown:this._onMouseDown.bind(this),onTouchStart:this._onMouseDown.bind(this),ref:"work-station",style:{minWidth:t?0:this.state.canvas.size.width*this.state.canvas.scale*1.4,minHeight:t?0:this.state.canvas.size.height*this.state.canvas.scale*1.2}},l.a.createElement("div",{className:"main-frame",ref:"main-frame"},l.a.createElement("div",{className:"work-station-content",ref:"work-station-content",style:{width:this.state.canvas.size.width*this.state.canvas.scale,height:this.state.canvas.size.height*this.state.canvas.scale,backgroundColor:v?"#".concat(b):"#FFFFFF",marginTop:t?0:90,boxShadow:t?"none":"0 5px 20px rgba(71,80,89,.15)"}},this.state.stack.map((function(t,n){var i=t.type,a=tn.includes(e.state.selectedIds,t.id),o=tn.includes(e.state.loadingIds,t.id);return"svg"===i?l.a.createElement(Ot.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:a,key:t.id}):"text"===i?l.a.createElement(xt.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),onTextComponentAction:e.handleTextComponentAction.bind(e),isSelected:a,isLoading:o,key:t.id}):"line"===i?l.a.createElement(jt,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:a,key:t.id}):"shape"===i?l.a.createElement(It.a,{canvas:e.state.canvas,elem:t,onBaseComponentAction:e.handleBaseComponentAction.bind(e),isSelected:a,key:t.id}):null})),l.a.createElement(nn,{shouldShowWatermark:m})),y&&!t&&l.a.createElement(Kt.a,{config:this.props.config,onMetaChange:this.props.onMetaChange,onColorPopoverOpen:function(){e.unsubscribeEventListeners()},onColorPopoverClose:function(){e.subscribeEventListeners(),e.handleMouseUp()}}),!t&&m&&l.a.createElement(an,{className:"work-station-notice"},"- ",i("edit-panel.watermark-notice")," -")),l.a.createElement("div",{className:"overlay"},this.state.guidingLines.map((function(t,n){var i=e.state,a=i.panel,o=i.canvas;return l.a.createElement($e,{panel:a,canvas:o,guidingLine:t,key:n})})),u.map((function(t){var n=e.state.stack.find((function(e){return e.id===t}));return p||f?null:l.a.createElement(at,{panel:r,canvas:c,hoveringElem:n,key:t})})),h.map((function(t){var n=e.state.stack.find((function(e){return e.id===t}));return tn.includes(e.state.loadingIds,t)?null:l.a.createElement(Et,Object.assign({},e.state,{resizable:1===h.length&&C,rotatable:1===h.length&&E,isRotating:e.state.isRotating,selectedElem:n,onSelectedFrameAction:e.handleSelectedFrameAction.bind(e),key:t}))})),function(){var t=e.state.selectedIds;if(t.length<=1)return null;var n=e.state.stack.filter((function(e){return tn.includes(t,e.id)})),i=ce.ConfigDigester.extractComponentsFrame(n);return l.a.createElement(Et,Object.assign({},e.state,{resizable:C,rotatable:!1,selectedElem:{type:"group",frame:i},onSelectedFrameAction:e.handleSelectedFrameAction.bind(e)}))}(),function(){var t=e.state,n=t.isDragSelecting,i=t.dragSelectInfo;return n?l.a.createElement(Tt,{dragSelectInfo:i,canvas:c,panel:r}):null}(),!t&&this.getAutoCenterButton(),!t&&h.length>0&&g&&l.a.createElement("div",null,l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:g.top,left:g.left+g.width+10,pointerEvents:"auto"}},l.a.createElement(Yt.e,{onActionItemClick:this.props.onActionItemClick,featureList:this.props.featureList})),l.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},style:{position:"absolute",top:g.top-40,left:g.left,pointerEvents:"auto"}},k&&l.a.createElement(Zt.g,{onActionItemClick:this.props.onActionItemClick,offsetLeft:M}),w&&1===h.length&&l.a.createElement(qt.c,{onActionItemClick:this.props.onActionItemClick,offsetLeft:M}))),S&&l.a.createElement(Ut,{onToggleButtonClick:this.props.toggleTipsCarousel,isShowingTipsCarousel:this.props.isShowingTipsCarousel,menuItem:this.props.menuItem,onMenuClick:this.props.onMenuClick,isLoadingEditingTips:this.props.isLoadingEditingTips,editingTips:this.props.editingTips}),D&&l.a.createElement(Xt,{content:i("edit-panel.tips.editing-alert")}))))}}]),t}(c.Component),sn=Object(Ve.b)()(on),rn=n(1738),cn=n(2332),ln=(n(2247),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.shouldShowBack;return l.a.createElement("div",{className:e?"floating-button back":"floating-button",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick},l.a.createElement("div",{className:e?"wrapper back":"wrapper"},l.a.createElement("i",{className:"fa fa-tint","aria-hidden":"true"}),l.a.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})))}}]),t}(c.Component)),dn=(n(2248),function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e,n))).colorPalettes=[{name:"Lady Pink",colors:["#F562A6","#FFB5CC","#F562A6","#FEEDF2"]},{name:"Juno",colors:["#1A535C","#578990","#1A535C","#FFE66C"]},{name:"Patriot",colors:["#334D88","#A90001","#E6E6E6","#0D255E"]},{name:"Ocean Wave",colors:["#197BBD","#696666","#197BBD","#62A7D3"]},{name:"The River",colors:["#3E72AF","#8DB1DD","#3E72AF","#DBE2F0"]},{name:"Apple",colors:["#FF1434","#292929","#F2F2F2","#FF1434"]},{name:"Tropical",colors:["#194702","#575757","#194702","#4E8E30"]},{name:"Good Old Days",colors:["#8B8138","#404040","#8B8138","#D6CD8C"]},{name:"Mystery",colors:["#A5427C","#851756","#A5427C","#FCCCE8"]},{name:"Smartie",colors:["#2EC5B6","#011628","#FF9F1C","#011628"]},{name:"Reliable",colors:["#4A2F7C","#2E2B2B","#CCB9EE","#4A2F7C"]},{name:"Calmness",colors:["#D8A794","#817571","#D8A794","#FFC9B5"]},{name:"Fresh",colors:["#4F873E","#434B26","#4F873E","#CFFFC0"]},{name:"Jujube",colors:["#6F1314","#420202","#6F1314","#C43E3E"]},{name:"Red Rock",colors:["#BF4D31","#381308","#BF4D31","#CDB7B1"]},{name:"Curious",colors:["#484BB4","#FFD14C","#9395DF","#484BB4"]},{name:"Carrot",colors:["#EF8A07","#A55D00","#EFD8BA","#EF8A07"]},{name:"Golden Age",colors:["#DDBF7E","#937A44","#DDBF7E","#FCEDC9"]},{name:"Rainforest",colors:["#187000","#45A92B","#E4E9C3","#282828"]},{name:"Wonderland",colors:["#E63946","#FB8991","#457A9C","#A8DADD"]},{name:"Marshmallow",colors:["#AA95DA","#FCBAD3","#FFFFD2","#AA95DA"]},{name:"Lychee",colors:["#EF243C","#8D99AE","#EDF2F4","#EF243C"]},{name:"Vinyl Records",colors:["#653C00","#1C1406","#C89542","#1C1406"]}],a}return Object(r.a)(t,e),Object(a.a)(t,[{key:"getColorPaletteBlocks",value:function(){var e=this;return this.colorPalettes.map((function(t,n){return l.a.createElement("div",{className:"color-palette-block",onClick:function(){e.props.onSelectColorPalette(t)},key:n},l.a.createElement("div",{className:"title"},t.name),l.a.createElement("div",{className:"color-preview-wrapper"},t.colors.map((function(e,t){return l.a.createElement("div",{className:"color-preview",style:{background:e},key:t})}))))}))}},{key:"render",value:function(){var e=this.props.t,t=this.props.active;return l.a.createElement("div",{className:t?"side-bar active":"side-bar"},l.a.createElement("p",{className:"palette-title"},e("edit-panel.color.premade-color-palettes")),this.getColorPaletteBlocks())}}]),t}(c.Component)),hn=Object(Ve.b)()(dn),un=(n(2249),function(e){function t(e,n){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e,n))).state={hoverButton:!1,allowTooltip:!0,showSideBar:!1},a}return Object(r.a)(t,e),Object(a.a)(t,[{key:"componentWillUpdate",value:function(e){void 0!==e.opened&&e.opened!==this.state.showSideBar&&this.applyChange((function(t){return{showSideBar:e.opened}}))}},{key:"toggle",value:function(e){var t=this;this.applyChange((function(t){return{showSideBar:void 0!==e?e:!t.showSideBar}}),(function(){t.props.onToggle(t.state.showSideBar)}))}},{key:"applyChange",value:function(e,t){var n=this;this.setState((function(t){return e(t)}),(function(){t&&t(),n.state.showSideBar?n.setState({allowTooltip:!n.state.showSideBar}):setTimeout(function(){this.setState({allowTooltip:!this.state.showSideBar})}.bind(n),500)}))}},{key:"render",value:function(){var e=this,t=this.props.t,n=this.state,i=n.hoverButton,a=n.showSideBar,o=n.allowTooltip;return l.a.createElement("div",{className:"color-palette-side-bar"},l.a.createElement(cn.a,{id:"color-palette-side-bar-tooltip",title:t("edit-panel.color.premade-color-palettes"),open:i&&o,placement:"left"},l.a.createElement(ln,{onMouseEnter:function(){e.setState({hoverButton:!0})},onMouseLeave:function(){e.setState({hoverButton:!1})},shouldShowBack:a,onClick:function(){e.toggle()}})),l.a.createElement(hn,{active:a,onSelectColorPalette:function(t){e.toggle(!1),e.props.onSelectColorPalette(t)}}))}}]),t}(c.Component)),pn=Object(Ve.b)()(un),fn=(n(2250),{cloneDeep:w.a,get:ve.a}),gn=function(e){function t(e,n){var a;Object(i.a)(this,t),a=Object(o.a)(this,Object(s.a)(t).call(this,e,n));var r=window.innerWidth>=1400?1:.7;return d.a.isMobile()&&(r=window.innerWidth/e.canvasSize.width),a.state={canvasSize:e.canvasSize,scale:r,colorPaletteOpened:!1},a}return Object(r.a)(t,e),Object(a.a)(t,[{key:"handleViewerScaleChange",value:function(e){var t=Math.round(10*this.state.scale)/10,n="plus"===e?t+.1:t-.1;(n=n.toFixed(1))>=.6&&n<=1.4&&this.setState({scale:n})}},{key:"handleColorSelect",value:function(e){var t=e.colors[0].replace("#",""),n=e.colors[1].replace("#",""),i=e.colors[2].replace("#",""),a=e.colors[3].replace("#",""),o=this.props.componentInfo,s=function(e){var t=this.props.config.components.find((function(t){return t.id===e}));return t&&(t=fn.cloneDeep(t)),t},r=function(e,o){var r=this,c=[];return e.forEach((function(e){var l=s.bind(r)(e.id);if(l){var d=e.nSupportingDarkBackgrounds%2===1;if("background"===o){var h=l.data.darkBackground?a:n;l.data.tintColor=h,e.backgroundSupport&&d&&l.data.darkBackground&&(l.data.tintColor=n)}else e.backgroundSupport&&d?l.data.tintColor=i:l.data.tintColor="primary"===e.priority?t:n;var p=Boolean(fn.get(l,"data.stroke.width")),f=l.data.tintColor;p&&(l.data.tintColor=function(e){var t=u()(e);return t.isLight()?t.darken(25).toHex():t.lighten(25).toHex()}(f),l.data.stroke.tintColor=f),c.push(l)}})),c},c=[];for(var l in o)c=c.concat(r.bind(this)(o[l],l));this.props.onComponentsChange(c,{userAction:!0})}},{key:"render",value:function(){var e=this,t=d.a.isMobile(),n=this.props,i=n.config,a=n.editingItems,o=n.editingLogoPurchased,s=this.state.canvasSize,r=t?this.state.scale:Math.round(10*this.state.scale)/10,c=this.props.undoStack.length>0,h=this.props.redoStack.length>0;return o&&["logo"].push("purchased"),l.a.createElement("div",{className:"viewer"},l.a.createElement(sn,{ref:"viewer-panel",config:i,canvasSize:s,currentScale:r,editingLogoPurchased:this.props.editingLogoPurchased,selectedComponents:a,onComponentsChange:function(t,n){e.props.onComponentsChange(t,n)},onAutoCenter:this.props.onAutoCenter,onActionItemClick:function(t){e.props.onActionItemClick(t,a)},onDeleteComponents:this.props.onDeleteComponents,onSelectComponents:function(t){e.props.onSelectComponents(t),e.setState({colorPaletteOpened:!1})},onUndoChange:this.props.onUndoChange,onRedoChange:this.props.onRedoChange,onMetaChange:this.props.onMetaChange,menuItem:this.props.menuItem,onMenuClick:this.props.onMenuClick,isShowingTipsCarousel:this.props.isShowingTipsCarousel,toggleTipsCarousel:this.props.toggleTipsCarousel,isLoadingEditingTips:this.props.isLoadingEditingTips,editingTips:this.props.editingTips,featureList:this.props.featureList}),!t&&!o&&l.a.createElement(rn.a,null),!t&&l.a.createElement(pn,{opened:this.state.colorPaletteOpened,onToggle:function(t){e.setState({colorPaletteOpened:t}),t&&e.props.onSelectComponents(null)},onSelectColorPalette:this.handleColorSelect.bind(this)}),!t&&l.a.createElement("div",{className:"viewer-control"},l.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"}),l.a.createElement("span",null,l.a.createElement("i",{onClick:function(){e.handleViewerScaleChange("minus")},className:"fa fa-minus","aria-hidden":"true"}),l.a.createElement("span",null,"".concat(Math.round(100*r),"%")),l.a.createElement("i",{onClick:function(){e.handleViewerScaleChange("plus")},className:"fa fa-plus","aria-hidden":"true"}))),!t&&l.a.createElement("div",{className:"action-control"},l.a.createElement("span",null,l.a.createElement("i",{onClick:this.props.onUndoChange,className:c?"fa fa-undo":"fa fa-undo disabled","aria-hidden":"true"}),l.a.createElement("span",null),l.a.createElement("i",{onClick:this.props.onRedoChange,className:h?"fa fa-repeat":"fa fa-repeat disabled","aria-hidden":"true"}))))}}]),t}(c.Component);t.a=gn},2210:function(e,t,n){},2213:function(e,t,n){var i={get:n(665)},a=n(1453).degreeToRadian;e.exports=function(e,t){var n=e.frame,o=n.origin,s=n.size,r=i.get(e,"transform.rotate")||0,c=t||"center",l=o.x+s.width/2,d=o.y+s.height/2,h=a(r),u=2*Math.atan(s.height/s.width),p=0;switch(c){case"e":p=h;break;case"s":p=Math.PI/2+h;break;case"w":p=Math.PI+h;break;case"n":p=3*Math.PI/2+h;break;case"se":p=u/2+h;break;case"sw":p=Math.PI-u/2+h;break;case"nw":p=Math.PI+u/2+h;break;case"ne":p=2*Math.PI-u/2+h}var f=Math.sqrt(Math.pow(s.width,2)+Math.pow(s.height,2)),g=0;switch(c){case"nw":case"ne":case"se":case"sw":g=f/2;break;case"w":case"e":g=s.width/2;break;case"n":case"s":g=s.height/2}return{x:l+g*Math.cos(p),y:d+g*Math.sin(p)}}},2214:function(e,t,n){var i=n(1453).degreeToRadian;e.exports={getDeltaWithResizeMode:function(e,t,n,a){var o,s,r=e||0,c=t||0,l=i(a),d=Math.sin(l),h=Math.cos(l);switch(n){case"se":o=r*h+c*d,s=-r*d+c*h;break;case"sw":o=-r*h-c*d,s=-r*d+c*h;break;case"nw":o=-r*h-c*d,s=r*d-c*h;break;case"ne":o=r*h+c*d,s=r*d-c*h;break;case"w":o=-r*h-c*d,s=0;break;case"e":o=r*h+c*d,s=0;break;case"n":o=0,s=r*d-c*h;break;case"s":o=0,s=-r*d+c*h}return void 0!==o&&void 0!==s||console.log("getDeltaWithResizeMode error: unexpected undefined value",o,s),{deltaX:o,deltaY:s}},getOriginChangeWithResizeMode:function(e,t,n){switch(n){case"se":case"e":case"s":e=0,t=0;break;case"ne":case"n":e=0;break;case"sw":case"w":t=0}return{originChangeX:e,originChangeY:t}},getAnchorWithMode:function(e){var t="top-left";switch(e){case"nw":t="bottom-right";break;case"ne":t="bottom-left";break;case"sw":t="top-right"}return t}}},2215:function(e,t){e.exports={getDeltaWithResizeMode:function(e,t,n){var i=e,a=t;switch(n){case"nw":i=i?-i:i,a=a?-a:a;break;case"ne":a=a?-a:a;break;case"sw":i=i?-i:i;break;case"w":i=i?-i:0,a=0;break;case"e":i=i||0,a=0;break;case"n":i=0,a=a?-a:0;break;case"s":i=0,a=a||0}return{deltaX:i,deltaY:a}},getOriginChangeWithResizeMode:function(e,t,n){switch(n){case"se":case"e":case"s":e=0,t=0;break;case"ne":case"n":e=0;break;case"sw":case"w":t=0}return{originChangeX:e,originChangeY:t}},getAnchorWithMode:function(e){var t="top-left";switch(e){case"nw":t="bottom-right";break;case"ne":t="bottom-left";break;case"sw":t="top-right"}return t}}},2216:function(e,t,n){var i={map:n(709),find:n(1004),isEqual:n(850)},a=n(2217),o=n(2221),s=n(2222),r=n(2223),c=function(e){return i.map(e,(function(e){return e.reportFormat}))};e.exports={getStackFromConfig:function(e){return i.map(e,(function(e){return"svg"===e.type?new a(e):"text"===e.type?new o(e):"line"===e.type?new s(e):"shape"===e.type?new r(e):void 0}))},getReportFormatStack:c,inheritCacheFromOldStack:function(e,t){return i.map(e,(function(e){if("text"===e.type){var n=i.find(t,{id:e.id});n&&(e.cachedData=n.cachedData)}return e}))},isSameStack:function(e,t){var n=c(e),a=c(t),o=!0;if(n.length===a.length)for(var s=0;s<n.length;s++){var r=n[s],l=a[s];if(!i.isEqual(r,l)){o=!1;break}}else o=!1;return o}}},2217:function(e,t,n){var i=n(1589),a=n(1590),o=n(1603),s=n(1604),r=n(1605),c=n(1606);e.exports=function(e){"use strict";function t(){return i(this,t),o(this,s(t).apply(this,arguments))}return r(t,e),a(t,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),t}(c)},2221:function(e,t,n){var i=n(1589),a=n(1590),o=n(1603),s=n(1604),r=n(1605),c={pick:n(1084)},l=n(1606);e.exports=function(e){"use strict";function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,t),(e=o(this,s(t).call(this,n))).cachedData=n.cachedData||{},e}return r(t,e),a(t,[{key:"coreData",get:function(){return c.pick(this.data,["text","fontSize","letterSpacing","fontUrl","font"])}},{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),t}(l)},2222:function(e,t,n){var i=n(1589),a=n(1590),o=n(1603),s=n(1604),r=n(1605),c=n(1606);e.exports=function(e){"use strict";function t(){return i(this,t),o(this,s(t).apply(this,arguments))}return r(t,e),a(t,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),t}(c)},2223:function(e,t,n){var i=n(1589),a=n(1590),o=n(1603),s=n(1604),r=n(1605),c=n(1606);e.exports=function(e){"use strict";function t(){return i(this,t),o(this,s(t).apply(this,arguments))}return r(t,e),a(t,[{key:"reportFormat",get:function(){return{id:this.id,type:this.type,data:this.data,frame:this.frame,transform:this.transform}}}]),t}(c)},2224:function(e,t,n){},2240:function(e,t,n){},2244:function(e,t,n){},2245:function(e,t,n){},2247:function(e,t,n){},2248:function(e,t,n){},2249:function(e,t,n){},2250:function(e,t,n){}}]);